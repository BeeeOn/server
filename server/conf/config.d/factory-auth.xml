<system>
	<factory>
		<alias name="sessionManager" ref="${session.manager}SessionManager" />

		<instance name="systemSessionManager" class="BeeeOn::SessionManagerImpl">
			<set name="secureRandomProvider"
				ref="pocoRandomProvider" />
			<set name="sessionExpireTime" time="${session.expire}" />
			<set name="maxUserSessions" number="${session.maxPerUser}" />
		</instance>

		<instance name="jwtDecoder" class="BeeeOn::JWTDecoder">
			<set name="secret" text="${session.jwt.secret}" />
		</instance>

		<instance name="jwtEncoder" class="BeeeOn::JWTEncoder">
			<set name="secret" text="${session.jwt.secret}" />
			<set name="algorithm" text="${session.jwt.algorithm}" />
		</instance>

		<instance name="jwtSessionManager" class="BeeeOn::JWTSessionManager">
			<set name="audienceList" list="${session.jwt.audience}" />
			<set name="jwtDecoder" ref="jwtDecoder" />
			<set name="jwtEncoder" ref="jwtEncoder" />
			<set name="localeManager" ref="localeManager" />
			<set name="issuerName" text="BeeeOn" />
			<set name="sessionExpireTime" time="${session.expire}" />
		</instance>

		<instance name="googlePermitAuthProvider"
				class="BeeeOn::PermitAuthProvider">
			<set name="resultProvider" text="google" />
		</instance>

		<instance name="googleWebAuth"
				class="BeeeOn::GoogleAuthProvider">
			<set name="clientSecret" text="${web-app.google.clientSecret}"/>
			<set name="clientId" text="${web-app.google.clientId}"/>
			<set name="redirectUri" text="${web-app.google.redirectUri}"/>
			<set name="sslConfig" ref="googleOAuthSSL"/>
			<set name="id" text="google-webapp"/>
		</instance>

		<instance name="googleAndroidAuth"
				class="BeeeOn::GoogleAuthProvider">
			<set name="clientSecret" text="${android.google.clientSecret}"/>
			<set name="clientId" text="${android.google.clientId}"/>
			<set name="redirectUri" text="${android.google.redirectUri}"/>
			<set name="sslConfig" ref="googleOAuthSSL"/>
			<set name="id" text="google-android"/>
		</instance>

		<instance name="facebookWebAuth"
				class="BeeeOn::FacebookAuthProvider">
			<set name="clientSecret" text="${web-app.facebook.clientSecret}"/>
			<set name="clientId" text="${web-app.facebook.clientId}"/>
			<set name="redirectUri" text="${web-app.facebook.redirectUri}"/>
			<set name="sslConfig" ref="facebookOAuthSSL"/>
			<set name="id" text="facebook-webapp" />
		</instance>

		<instance name="facebookAndroidAuth"
				class="BeeeOn::FacebookAuthProvider">
			<set name="clientSecret" text="${android.facebook.clientSecret}"/>
			<set name="clientId" text="${android.facebook.clientId}"/>
			<set name="redirectUri" text="${android.facebook.redirectUri}"/>
			<set name="sslConfig" ref="facebookOAuthSSL"/>
			<set name="id" text="facebook-android" />
		</instance>
	</factory>
</system>
