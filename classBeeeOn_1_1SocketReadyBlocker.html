<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BeeeOn Server: BeeeOn::SocketReadyBlocker Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="BeeeOn.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BeeeOn Server
   &#160;<span id="projectnumber">v2018.07.1</span>
   </div>
   <div id="projectbrief">Platform to interconnect the IoT world</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>BeeeOn</b></li><li class="navelem"><a class="el" href="classBeeeOn_1_1SocketReadyBlocker.html">SocketReadyBlocker</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">BeeeOn::SocketReadyBlocker Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implements a fake loop that waits until a remote system starts listening on the configured socket. It serves as a barrier while starting loops that depend on each other somehow.  
 <a href="classBeeeOn_1_1SocketReadyBlocker.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="SocketReadyBlocker_8h_source.html">SocketReadyBlocker.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for BeeeOn::SocketReadyBlocker:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classBeeeOn_1_1SocketReadyBlocker.png" usemap="#BeeeOn::SocketReadyBlocker_map" alt=""/>
  <map id="BeeeOn::SocketReadyBlocker_map" name="BeeeOn::SocketReadyBlocker_map">
<area href="classBeeeOn_1_1StoppableLoop.html" alt="BeeeOn::StoppableLoop" shape="rect" coords="0,0,181,24"/>
<area href="classBeeeOn_1_1Loggable.html" alt="BeeeOn::Loggable" shape="rect" coords="191,0,372,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab228233ae4f5cba600cf63732752414e"><td class="memItemLeft" align="right" valign="top"><a id="ab228233ae4f5cba600cf63732752414e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1SocketReadyBlocker.html#ab228233ae4f5cba600cf63732752414e">setHost</a> (const std::string &amp;host)</td></tr>
<tr class="memdesc:ab228233ae4f5cba600cf63732752414e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set host to connect until up. <br /></td></tr>
<tr class="separator:ab228233ae4f5cba600cf63732752414e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24393dbdaa96dd03cde3516ce143bc4a"><td class="memItemLeft" align="right" valign="top"><a id="a24393dbdaa96dd03cde3516ce143bc4a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1SocketReadyBlocker.html#a24393dbdaa96dd03cde3516ce143bc4a">setPort</a> (int port)</td></tr>
<tr class="memdesc:a24393dbdaa96dd03cde3516ce143bc4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set port to connect until up. <br /></td></tr>
<tr class="separator:a24393dbdaa96dd03cde3516ce143bc4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f8a6df8990e9ab7722a54a8b06d291e"><td class="memItemLeft" align="right" valign="top"><a id="a1f8a6df8990e9ab7722a54a8b06d291e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1SocketReadyBlocker.html#a1f8a6df8990e9ab7722a54a8b06d291e">setTimeout</a> (const Poco::Timespan &amp;timeout)</td></tr>
<tr class="memdesc:a1f8a6df8990e9ab7722a54a8b06d291e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure timeout of the blocking operation. The timeout can be negative (infinity). If the timeout is exceeded, the <a class="el" href="classBeeeOn_1_1SocketReadyBlocker.html" title="Implements a fake loop that waits until a remote system starts listening on the configured socket...">SocketReadyBlocker</a> fails to start with TimeoutException. <br /></td></tr>
<tr class="separator:a1f8a6df8990e9ab7722a54a8b06d291e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c6dda026b91c5bf08288ba97f827650"><td class="memItemLeft" align="right" valign="top"><a id="a5c6dda026b91c5bf08288ba97f827650"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1SocketReadyBlocker.html#a5c6dda026b91c5bf08288ba97f827650">setInterval</a> (const Poco::Timespan &amp;interval)</td></tr>
<tr class="memdesc:a5c6dda026b91c5bf08288ba97f827650"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure interval between two consecutive connections to the remote system (to not DoS it). <br /></td></tr>
<tr class="separator:a5c6dda026b91c5bf08288ba97f827650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768df86815ed85e9c8e9885fb2971154"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1SocketReadyBlocker.html#a768df86815ed85e9c8e9885fb2971154">setRequest</a> (const std::list&lt; std::string &gt; &amp;payload)</td></tr>
<tr class="memdesc:a768df86815ed85e9c8e9885fb2971154"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set payload to send to the remote server in case when the TCP connection successfully opens.  <a href="#a768df86815ed85e9c8e9885fb2971154">More...</a><br /></td></tr>
<tr class="separator:a768df86815ed85e9c8e9885fb2971154"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad4af4e8578b0d3bb6e7519ac078d606"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1SocketReadyBlocker.html#aad4af4e8578b0d3bb6e7519ac078d606">setResponseHeader</a> (const std::list&lt; std::string &gt; &amp;payload)</td></tr>
<tr class="memdesc:aad4af4e8578b0d3bb6e7519ac078d606"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set expected response header from the remote server. If set, the response must contain at least the header at its beginning.  <a href="#aad4af4e8578b0d3bb6e7519ac078d606">More...</a><br /></td></tr>
<tr class="separator:aad4af4e8578b0d3bb6e7519ac078d606"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25fb08cab2bca5658742b70ac6ebe9fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1SocketReadyBlocker.html#a25fb08cab2bca5658742b70ac6ebe9fa">setResponseBody</a> (const std::list&lt; std::string &gt; &amp;payload)</td></tr>
<tr class="memdesc:a25fb08cab2bca5658742b70ac6ebe9fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set expected response body from the remote server. If set, the response must contain the header (if set) and just after the header, the rest of the response payload must match the body.  <a href="#a25fb08cab2bca5658742b70ac6ebe9fa">More...</a><br /></td></tr>
<tr class="separator:a25fb08cab2bca5658742b70ac6ebe9fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1291a4e27df417dd07dec1d69cc8c22"><td class="memItemLeft" align="right" valign="top"><a id="ab1291a4e27df417dd07dec1d69cc8c22"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1SocketReadyBlocker.html#ab1291a4e27df417dd07dec1d69cc8c22">setResponseSize</a> (int size)</td></tr>
<tr class="memdesc:ab1291a4e27df417dd07dec1d69cc8c22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set count of bytes to expect to receive. If negative, the response size is not considered. <br /></td></tr>
<tr class="separator:ab1291a4e27df417dd07dec1d69cc8c22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85db94d264281078a1d91acbf7132716"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1SocketReadyBlocker.html#a85db94d264281078a1d91acbf7132716">start</a> () override</td></tr>
<tr class="memdesc:a85db94d264281078a1d91acbf7132716"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start connecting to the remote system until it is up or a timeout exceeds. The method intentionally blocks.  <a href="#a85db94d264281078a1d91acbf7132716">More...</a><br /></td></tr>
<tr class="separator:a85db94d264281078a1d91acbf7132716"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a757e1b7c8461a62df72f0edd1f3567fb"><td class="memItemLeft" align="right" valign="top"><a id="a757e1b7c8461a62df72f0edd1f3567fb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1SocketReadyBlocker.html#a757e1b7c8461a62df72f0edd1f3567fb">stop</a> () override</td></tr>
<tr class="memdesc:a757e1b7c8461a62df72f0edd1f3567fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupts the periodic connections to the remote system without any error. <br /></td></tr>
<tr class="separator:a757e1b7c8461a62df72f0edd1f3567fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a0f4d848212c480d4da835dd6571c9aa5"><td class="memItemLeft" align="right" valign="top"><a id="a0f4d848212c480d4da835dd6571c9aa5"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>ping</b> () const</td></tr>
<tr class="separator:a0f4d848212c480d4da835dd6571c9aa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4898e4e5b79e785bf68f0be82f54ae45"><td class="memItemLeft" align="right" valign="top"><a id="a4898e4e5b79e785bf68f0be82f54ae45"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>sendRequest</b> (Poco::Net::StreamSocket &amp;socket) const</td></tr>
<tr class="separator:a4898e4e5b79e785bf68f0be82f54ae45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b3e363eab6f03206d5d8c493c399250"><td class="memItemLeft" align="right" valign="top"><a id="a2b3e363eab6f03206d5d8c493c399250"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>checkResponse</b> (Poco::Net::StreamSocket &amp;socket) const</td></tr>
<tr class="separator:a2b3e363eab6f03206d5d8c493c399250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54dd3c7a8161d690e2ffb47dfdbf6cef"><td class="memItemLeft" align="right" valign="top"><a id="a54dd3c7a8161d690e2ffb47dfdbf6cef"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>checkTimeout</b> (const Poco::Clock &amp;clock) const</td></tr>
<tr class="separator:a54dd3c7a8161d690e2ffb47dfdbf6cef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa52b0d3e62188a60cf1e3a9b497e3d10"><td class="memItemLeft" align="right" valign="top"><a id="aa52b0d3e62188a60cf1e3a9b497e3d10"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>remote</b> () const</td></tr>
<tr class="separator:aa52b0d3e62188a60cf1e3a9b497e3d10"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a4fa9f99f5f59191103dbd3ad6c59dec1"><td class="memItemLeft" align="right" valign="top"><a id="a4fa9f99f5f59191103dbd3ad6c59dec1"></a>
static std::vector&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>parsePayload</b> (const std::list&lt; std::string &gt; &amp;payload)</td></tr>
<tr class="separator:a4fa9f99f5f59191103dbd3ad6c59dec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2884312ba92d327225a23709ca2f182"><td class="memItemLeft" align="right" valign="top"><a id="ac2884312ba92d327225a23709ca2f182"></a>
static std::string&#160;</td><td class="memItemRight" valign="bottom"><b>payloadToString</b> (const std::vector&lt; uint8_t &gt; &amp;payload)</td></tr>
<tr class="separator:ac2884312ba92d327225a23709ca2f182"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classBeeeOn_1_1StoppableLoop"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classBeeeOn_1_1StoppableLoop')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classBeeeOn_1_1StoppableLoop.html">BeeeOn::StoppableLoop</a></td></tr>
<tr class="memitem:a7a0b9a5da3cff3f1d6485c0e6517e343 inherit pub_types_classBeeeOn_1_1StoppableLoop"><td class="memItemLeft" align="right" valign="top"><a id="a7a0b9a5da3cff3f1d6485c0e6517e343"></a>
typedef Poco::SharedPtr&lt; <a class="el" href="classBeeeOn_1_1StoppableLoop.html">StoppableLoop</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>Ptr</b></td></tr>
<tr class="separator:a7a0b9a5da3cff3f1d6485c0e6517e343 inherit pub_types_classBeeeOn_1_1StoppableLoop"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements a fake loop that waits until a remote system starts listening on the configured socket. It serves as a barrier while starting loops that depend on each other somehow. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a768df86815ed85e9c8e9885fb2971154"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a768df86815ed85e9c8e9885fb2971154">&#9670;&nbsp;</a></span>setRequest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SocketReadyBlocker::setRequest </td>
          <td>(</td>
          <td class="paramtype">const std::list&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>payload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set payload to send to the remote server in case when the TCP connection successfully opens. </p>
<p>Format: a list of bytes is expected in format "HH", "HH", ... </p>

</div>
</div>
<a id="a25fb08cab2bca5658742b70ac6ebe9fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25fb08cab2bca5658742b70ac6ebe9fa">&#9670;&nbsp;</a></span>setResponseBody()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SocketReadyBlocker::setResponseBody </td>
          <td>(</td>
          <td class="paramtype">const std::list&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>payload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set expected response body from the remote server. If set, the response must contain the header (if set) and just after the header, the rest of the response payload must match the body. </p>
<p>Format: a list of bytes is expected in format "HH", "HH", ... </p>

</div>
</div>
<a id="aad4af4e8578b0d3bb6e7519ac078d606"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad4af4e8578b0d3bb6e7519ac078d606">&#9670;&nbsp;</a></span>setResponseHeader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SocketReadyBlocker::setResponseHeader </td>
          <td>(</td>
          <td class="paramtype">const std::list&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>payload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set expected response header from the remote server. If set, the response must contain at least the header at its beginning. </p>
<p>Format: a list of bytes is expected in format "HH", "HH", ... </p>

</div>
</div>
<a id="a85db94d264281078a1d91acbf7132716"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85db94d264281078a1d91acbf7132716">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SocketReadyBlocker::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start connecting to the remote system until it is up or a timeout exceeds. The method intentionally blocks. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Poco::TimeoutException</td><td>when timeout exceeds </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classBeeeOn_1_1StoppableLoop.html#a8e0c261b4723084d6d9cf0e854ac3f4f">BeeeOn::StoppableLoop</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/jviki/Projects/BeeeOn/server/src/net/<a class="el" href="SocketReadyBlocker_8h_source.html">SocketReadyBlocker.h</a></li>
<li>/home/jviki/Projects/BeeeOn/server/src/net/SocketReadyBlocker.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
