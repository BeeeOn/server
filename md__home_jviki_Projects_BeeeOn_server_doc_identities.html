<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BeeeOn Server: Identities and users</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="BeeeOn.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BeeeOn Server
   &#160;<span id="projectnumber">v2018.11.1</span>
   </div>
   <div id="projectbrief">Platform to interconnect the IoT world</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Identities and users </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>BeeeOn Server maintains users to be able to restrict access to the associated gateways and sensors. Users usually log in through some external identity provider (OAuth 2). The act of registration is merged with the initial login. BeeeOn Server trusts the external identity providers and when a user passes a valid token during the login operation, it fetches the necessary user information from that provider.</p>
<div class="image">
<img src="auth-service.png" alt="auth-service.png"/>
<div class="caption">
Overview of AuthService</div></div>
 <h2>Model</h2>
<p>There are 2 main entities: <code>Identity</code> and <code>User</code>.</p>
<p>A <code>User</code> instance represents a person in the system. It contains information like <em>first name</em>, <em>last name</em>, <em>locale</em>. This information is usually fetched from an external identity provider.</p>
<p>An <code>Identity</code> represents somebody who can but does not have to be registered with the BeeeOn system. Each identity is identified by <em>e-mail</em>. There must not be two identities of the same <em>e-mail</em>. Thus, the identity represents the person (or people) who controls the connected mail box. By using identity, it is possible to invite any user to participate in the BeeeOn system regardless of whether she has already been registered with the BeeeOn system or not. The invited identity than might use an identity provider associated with that e-mail to register and use the associated BeeeOn Gateways.</p>
<p>There can be a single user with multiple identities. Also, there can be a single identity connected with multiple users. However, those two entities are not in any direct relationship.</p>
<div class="image">
<img src="identity.png" alt="identity.png"/>
<div class="caption">
Overview of identity model</div></div>
<p> When a user registers (logins for the first time) with the BeeeOn system, the chosen identity provider is used to fetch information about that user. The instances of <code>Identity</code> and <code>User</code> are than connected via <code>VerifiedIdentity</code>. This means that a trusted external identity provider has verified that identity. A <code>VerifiedIdentity</code> instance also contains provider-specific details about the user.</p>
<p>This model allows to connect accounts verified by different identity providers. If a single <em>e-mail</em> is used with two trusted identity providers and its owner logins into the BeeeOn system by both of them, the two would be automatically interconnected. It is also possible (but unimplemented) to interconnect two different identities (different <em>e-mails</em>).</p>
<p>Once an instance of <code>Identity</code> is granted an access to a particular BeeeOn Gateway, all associated identities got automatically the same priviledges (because they represent the same user). </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
