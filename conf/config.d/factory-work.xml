<system>
	<factory>
		<instance name="uiWorkLockManager" class="BeeeOn::WorkLockManager">
			<set name="accessLockCount" number="32" />
			<set name="executionLockCount" number="128" />
		</instance>

		<instance name="uiRunnerFactory" class="BeeeOn::TransactionalWorkRunnerFactory">
			<set name="transactionManager" ref="transactionManager" />
			<set name="lockManager" ref="uiWorkLockManager" />
		</instance>

		<instance name="uiWorkScheduler" class="BeeeOn::BasicProcessor">
			<set name="runnerFactory" ref="uiRunnerFactory" />
			<set name="lockManager" ref="uiWorkLockManager" />
			<add name="executors" ref="deviceUnpairExecutor" />
			<add name="executors" ref="gatewayScanExecutor" />
		</instance>

		<instance name="deviceUnpairExecutor" class="BeeeOn::DeviceUnpairWorkExecutor">
			<set name="deviceDao" ref="deviceDao" />
			<set name="gatewayRPC" ref="gatewayRPC" />
			<set name="scheduler" ref="uiWorkScheduler" />
			<set name="lockManager" ref="uiWorkLockManager" />
		</instance>

		<instance name="gatewayScanExecutor" class="BeeeOn::GatewayScanWorkExecutor">
			<set name="gatewayRPC" ref="gatewayRPC" />
			<set name="scheduler" ref="uiWorkScheduler" />
			<set name="lockManager" ref="uiWorkLockManager" />
		</instance>

		<instance name="uiWorkFacade" class="BeeeOn::DefaultWorkFacade">
			<set name="scheduler" ref="uiWorkScheduler" />
			<set name="lockManager" ref="uiWorkLockManager" />
			<set name="accessPolicy" ref="accessPolicy" />
		</instance>
	</factory>
</system>
